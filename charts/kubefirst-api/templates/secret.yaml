{{- if not .Values.existingSecret }}
{{- $initialPassword := randAlphaNum 32 | b64enc | quote -}}
apiVersion: v1
kind: Secret
metadata:
  name: kubefirst-initial-secrets
type: Opaque
data:
  mongodb-passwords: {{ $initialPassword }}
  mongodb-root-password: {{ $initialPassword }}
  mongodb-metrics-password: {{ $initialPassword }}
  mongodb-replica-set-key: {{ $initialPassword }}
  MONGO_INITDB_ROOT_PASSWORD: {{ $initialPassword }}
  MONGO_INITDB_ROOT_USERNAME:  {{ "root" | b64enc | quote }}
  K1_ACCESS_TOKEN: {{ uuidv4 | b64enc | quote }}
{{- end }}
